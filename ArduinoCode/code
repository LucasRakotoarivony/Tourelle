#include <SPI.h>  
#include <Pixy.h>

Pixy pixy;
uint16_t blocks;
int i=0;int j;
long tempsdeb;long tempsact;long duree;
float x1;float y1;float x2;float y2;float x3;float y3;
float a;float b;float c;
void setup()
{
  Serial.begin(9600);
  Serial.println("DÃ©but");
  pixy.init();
}
void loop() {
 blocks=pixy.getBlocks();
 delay(50);
 tempsact=millis();
 duree=tempsact-tempsdeb;
 if(blocks) {
   i++;
   if(i%8==0) {
     for(j=0;j<blocks;j++) {
       if(pixy.blocks[j].width>50 && pixy.blocks[j].height>40) {
         x1=pixy.blocks[0].x;y1=pixy.blocks[0].y;
         }
       }
     }
     if(i%11==0) {
     for(j=0;j<blocks;j++) {
       if(pixy.blocks[j].width>50 && pixy.blocks[j].height>40) {
         x2=pixy.blocks[0].x;y2=pixy.blocks[0].y;
         }
        }
     }
     if(i%14==0) {
     for(j=0;j<blocks;j++) {
       if(pixy.blocks[j].width>50 && pixy.blocks[j].height>40) {
         x3=pixy.blocks[0].x;y3=pixy.blocks[0].y;
         }
        }
       }
  }
if(i>15) {i=0;}
//Serial.println(i);
//Serial.print(x1);Serial.print("   ");Serial.print(x2);Serial.print("   ");Serial.println(x3);
//Serial.print(y1);Serial.print("   ");Serial.print(y2);Serial.print("   ");Serial.println(y3);
if(x1!=0 && x2!=0 && x3!=0) {
  c=y1-a*x1*x1-b*x1;
  b=(y2-a*x2*x2-c)/x2;
  a=(y3-b*x3-c)/(x3*x3);
}
//Serial.println(c);
Serial.print("y=");Serial.print(a);Serial.print("x*x+");Serial.print(b);Serial.print("x+");Serial.println(c);
}
//1:vert  2:bleu  3:rien  4:jaune  5:rouge  6:violet  7:orange
